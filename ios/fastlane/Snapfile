# Snapfile - Fastlane Snapshot Configuration
# https://docs.fastlane.tools/actions/snapshot/

# Devices for App Store screenshots
# 6.7" (1290x2796px) and 6.5" (1242x2688px) required
devices([
  "iPhone 17 Pro Max"
])

# Languages (German primary, English secondary)
languages([
  "de-DE",
  "en-US"
])

# Use Screenshots target with test fixtures
scheme("StillMoment-Screenshots")

# Project file
project("StillMoment.xcodeproj")

# Output directory (processed later to docs/images/screenshots/)
output_directory("./fastlane/screenshots")

# Clear previous screenshots before new run
clear_previous_screenshots(true)

# iOS version
ios_version("26.1")

# Skip opening HTML summary
skip_open_summary(true)

# Test target containing ScreenshotTests
test_target_name("StillMomentUITests")

# Disable concurrent simulators for stability
concurrent_simulators(false)

# Override status bar (optional - cleaner screenshots)
override_status_bar(true)

# Launch arguments for tests
launch_arguments([
  "-CountdownDuration 0"  # Skip 15s countdown for faster screenshots
])

# Headless mode (default: true for CI/automation)
# Set to false to watch the simulator while tests run
# Can be overridden via: HEADLESS=false make screenshots
headless(ENV["HEADLESS"] != "false")
