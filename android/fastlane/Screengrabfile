# Screengrabfile - Fastlane Screengrab Configuration
# https://docs.fastlane.tools/actions/screengrab/

# Locales (German and English)
locales(["de-DE", "en-US"])

# Clear previous screenshots before generating new ones
clear_previous_screenshots(true)

# Output directory for raw screenshots
output_directory("./fastlane/screenshots")

# App package name
app_package_name("com.stillmoment")

# Only run tests in the screenshots package
use_tests_in_packages(["com.stillmoment.screenshots"])

# APK paths (built by gradle task)
app_apk_path("app/build/outputs/apk/debug/app-debug.apk")
tests_apk_path("app/build/outputs/apk/androidTest/debug/app-debug-androidTest.apk")

# Custom test runner for Hilt dependency injection
test_instrumentation_runner("com.stillmoment.HiltTestRunner")

# Don't reinstall - Gradle already builds and installs APKs
# Setting this to true causes issues with the test APK not being found
reinstall_app(false)

# Exit on test failures
exit_on_test_failure(true)

# Device configuration - Pixel 6 Pro for consistent 6.7" screenshots
# Note: Emulator must be running before executing screengrab
# Start with: emulator -avd Pixel_6_Pro_API_34
